# E2E Test Setup Notes

## Prerequisites

Before running E2E tests, ensure:

1. **Environment Variables**: Create a `.env` file with required variables:
   ```
   SUPABASE_URL=your_supabase_url
   SUPABASE_KEY=your_supabase_anon_key
   OPENROUTER_API_KEY=your_openrouter_api_key
   ```

2. **Dependencies**: Install all dependencies:
   ```bash
   npm install
   ```

3. **Database**: Ensure Supabase is configured and accessible

## Running Tests

### Option 1: Automatic Server Start (Default)
Playwright will automatically start the dev server:
```bash
npm run test:e2e
```

### Option 2: Manual Server Start
If automatic startup fails, start the server manually:

1. In one terminal:
   ```bash
   npm run dev
   ```

2. In another terminal:
   ```bash
   PLAYWRIGHT_TEST_BASE_URL=http://localhost:4321 npm run test:e2e
   ```

   Or modify `playwright.config.ts` to set `reuseExistingServer: true`

## Troubleshooting

### Server Timeout
If you see "Timed out waiting for webServer":
- Check that port 4321 is not already in use
- Verify environment variables are set
- Try starting the server manually first to check for errors
- Increase timeout in `playwright.config.ts`

### Tests Failing
- Ensure the application builds successfully: `npm run build`
- Check browser console for errors
- Verify API endpoints are accessible
- Check authentication flow if testing protected routes
